function e(e,t,a,l){Object.defineProperty(e,t,{get:a,set:l,enumerable:!0,configurable:!0})}var t=globalThis,a={},l={},r=t.parcelRequire4571;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in l){var t=l[e];delete l[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){l[e]=t},t.parcelRequire4571=r),(0,r.register)("8rWe0",function(t,a){e(t.exports,"Fragment",()=>l,e=>l=e),e(t.exports,"jsx",()=>r,e=>r=e),e(t.exports,"jsxs",()=>s,e=>s=e);var l,r,s,n=Symbol.for("react.transitional.element");function i(e,t,a){var l=null;if(void 0!==a&&(l=""+a),void 0!==t.key&&(l=""+t.key),"key"in t)for(var r in a={},t)"key"!==r&&(a[r]=t[r]);else a=t;return{$$typeof:n,type:e,key:l,ref:void 0!==(t=a.ref)?t:null,props:a}}l=Symbol.for("react.fragment"),r=i,s=i});var s={};if(s=r("8rWe0"),"undefined"==typeof React)throw document.body.innerHTML='<h1 style="color:red;text-align:center;margin-top:50px;">Error: React library not loaded.</h1>',Error("React not loaded");console.log("React version:",React.version);const n=()=>`client_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i=({emoji:e,size:t=64,className:a=""})=>(0,s.jsx)("span",{className:`icon-placeholder ${a}`,style:{fontSize:`${t}px`},children:e||"❓"}),o="http://"+window.location.hostname+":8046",m={CRICKET:{id:"CRICKET",name:"Cricket",description:"Close out B, T, D, 20-15. Score on open numbers.",iconEmoji:"\uD83C\uDFAF",component:"CricketGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},THREE_FF:{id:"THREE_FF",name:"3 Friendly Flights",description:"Hit objectives, score points, or get halved! Round-robin for teams.",iconEmoji:"\uD83C\uDFB2",component:"ThreeFriendlyFlightsGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},FIVE_ZERO_ONE:{id:"FIVE_ZERO_ONE",name:"501",description:"Race from 501 to 0. Double-in and Double-out required.",iconEmoji:"\uD83D\uDCCA",component:"FiveZeroOneGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},AROUND_THE_WORLD:{id:"AROUND_THE_WORLD",name:"Around The World",description:"Hit 1-20, SB, DB. Report highest number hit for current target.",iconEmoji:"\uD83C\uDF0D",component:"AroundTheWorldGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},BEERS:{id:"BEERS",name:"BEERS",description:"Beat the previous player's score (High or Low).",iconEmoji:"\uD83C\uDF7A",component:"BeersGame",maxPlayers:8,supportsTeams:!1,individualOnly:!0},GOLF:{id:"GOLF",name:"Golf",description:"Play 18 holes (numbers 1-18). Aim for the lowest score.",iconEmoji:"⛳",component:"GolfGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},BASEBALL:{id:"BASEBALL",name:"Baseball",description:'Play 9 innings (numbers 1-9). Score "runs" in each inning.',iconEmoji:"⚾",component:"BaseballGame",maxPlayers:8,maxTeams:4,playersPerTeam:4,supportsTeams:!0,individualOnly:!1},KILLER:{id:"KILLER",name:"Killer",description:"Claim your number, become a Killer, eliminate targets.",iconEmoji:"\uD83D\uDD2A",component:"KillerGame",maxPlayers:8,supportsTeams:!1,individualOnly:!0}},c=({gameMode:e,onGameEnd:t,gameState:a})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-8 bg-gray-800 rounded-lg shadow-xl",children:[" ",(0,s.jsx)("h2",{className:"text-5xl font-bold mb-8 game-title-font text-yellow-400",children:e.name})," ",a&&(0,s.jsxs)("div",{className:"my-4 p-3 bg-gray-700 rounded w-full max-w-md text-left",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2 text-yellow-300",children:"Received Game State (Debug):"}),(0,s.jsx)("pre",{className:"text-xs text-gray-300 whitespace-pre-wrap break-all",children:JSON.stringify(a,null,2)})]})," ",(0,s.jsxs)("p",{className:"text-xl text-gray-300 mb-8",children:["Placeholder for ",e.name,"."]})," ",(0,s.jsx)("button",{onClick:t,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg text-2xl",children:"❌ End Game"})," "]}),d=({persistentPlayers:e,onSaveChanges:t,onBack:a,socket:l})=>{let[r,i]=React.useState(()=>JSON.parse(JSON.stringify(e||[]))),[o,m]=React.useState(!1),[c,d]=React.useState(null),[u,p]=React.useState(!1);React.useEffect(()=>{i(JSON.parse(JSON.stringify(e||[])))},[e]);let x=e=>{d(e),p("team"===e.type),m(!0)},g=e=>{confirm("Are you sure you want to delete this player/team?")&&i(t=>t.filter(t=>t.id!==e))};return(0,s.jsxs)("div",{className:"player-management-area container mx-auto px-4 py-8",children:[(0,s.jsx)("h2",{className:"text-4xl font-bold mb-6 game-title-font text-yellow-400 text-center",children:"Manage Players & Teams"}),(0,s.jsxs)("div",{className:"mb-6 flex flex-col sm:flex-row justify-center items-center gap-3",children:[(0,s.jsx)("button",{onClick:()=>{d(null),p(!1),m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white w-full sm:w-auto",children:"➕ Add Player"}),(0,s.jsx)("button",{onClick:()=>{d(null),p(!0),m(!0)},className:"bg-indigo-600 hover:bg-indigo-700 text-white w-full sm:w-auto",children:"➕ Add Team"})]}),o&&(0,s.jsx)(({playerToEdit:e,isNewTeam:t,onSave:a,onCancel:l})=>{let r=t||e&&"team"===e.type,[i,o]=React.useState(e?e.name:""),m=e&&"team"===e.type&&e.players?[...e.players,...Array(4-e.players.length).fill("")].slice(0,4):[,,,,].fill(""),[c,d]=React.useState(m),u=(e,t)=>{let a=[...c];a[e]=t,d(a)};return(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content max-w-md",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold mb-6 game-title-font text-yellow-400",children:e?r?"Edit Team":"Edit Player":t?"Add New Team":"Add New Player"}),(0,s.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),r){let t=c.map(e=>e.trim()).filter(e=>""!==e);i.trim()&&t.length>=1&&t.length<=4?a({...e||{},name:i.trim(),type:"team",players:t,id:e?e.id:n()}):alert("Team name and at least one player name (up to 4) are required.")}else i.trim()?a({...e||{},name:i.trim(),type:"individual",id:e?e.id:n()}):alert("Player name is required.")},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"entryName",className:"block text-sm font-medium text-gray-300",children:r?"Team Name":"Player Name"}),(0,s.jsx)("input",{type:"text",id:"entryName",value:i,onChange:e=>o(e.target.value),className:"mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:!0})]}),r&&(0,s.jsx)(s.Fragment,{children:[0,1,2,3].map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{htmlFor:`teamPlayer${e+1}`,className:"block text-sm font-medium text-gray-300",children:["Player ",e+1," Name ",e<1&&r?"":"(Optional)"]}),(0,s.jsx)("input",{type:"text",id:`teamPlayer${e+1}`,value:c[e],onChange:t=>u(e,t.target.value),className:"mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",required:e<1&&r})]},`team-player-${e}`))}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-5",children:[(0,s.jsx)("button",{type:"button",onClick:l,className:"bg-gray-600 hover:bg-gray-700 text-white",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white",children:e?"Save Changes":"Add"})]})]})]})})},{playerToEdit:c,isNewTeam:!c&&u,onSave:e=>{if(c)i(t=>t.map(t=>t.id===e.id?e:t));else{let t={...e,id:e.id||n()};i(e=>[...e,t])}m(!1),d(null)},onCancel:()=>{m(!1),d(null)}}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg max-h-[50vh] overflow-y-auto custom-scrollbar",children:[0===r.length&&(0,s.jsx)("p",{className:"text-gray-400 text-center",children:"No players or teams saved yet."}),r.map(e=>(0,s.jsxs)("div",{className:"player-list-item",children:[(0,s.jsxs)("div",{className:"flex-grow",children:[(0,s.jsx)("span",{className:"font-semibold text-lg",children:e.name}),"team"===e.type&&e.players&&(0,s.jsxs)("span",{className:"team-members",children:["(",e.players.join(", "),")"]})]}),(0,s.jsxs)("div",{className:"flex-shrink-0",children:[(0,s.jsx)("button",{onClick:()=>x(e),className:"bg-yellow-500 hover:bg-yellow-600 text-black",children:"✏️ Edit"}),(0,s.jsx)("button",{onClick:()=>g(e.id),className:"bg-red-600 hover:bg-red-700 text-white",children:"\uD83D\uDDD1️ Delete"})]})]},e.id))]}),(0,s.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row justify-center items-center gap-4",children:[(0,s.jsx)("button",{onClick:a,className:"bg-gray-600 hover:bg-gray-700 text-white py-3 px-6 text-lg w-full sm:w-auto",children:"⬅️ Back to Menu"}),(0,s.jsx)("button",{onClick:()=>{t(r)},className:"bg-green-600 hover:bg-green-700 text-white py-3 px-6 text-lg w-full sm:w-auto",children:"\uD83D\uDCBE Save All Changes"})]})]})},u=({selectedGame:e,onSetupComplete:t,onCancel:a,persistentPlayers:l,socket:r})=>{let[i,o]=React.useState("manual"),[m,c]=React.useState([]),d=e.playersPerTeam||2,u=!e.supportsTeams&&!e.individualOnly,[p,x]=React.useState(u),[g,y]=React.useState(e.individualOnly?1:(e.supportsTeams,2)),[h,f]=React.useState(2),[b,v]=React.useState(d),[j,N]=React.useState("HIGHER"),w=React.useCallback(()=>p&&e.supportsTeams?Array(h).fill(null).map((e,t)=>({type:"team",id:`manual_team-${t}`,name:`Team ${t+1}`,players:Array(b).fill("").map((e,a)=>`Team ${t+1} Player ${a+1}`)})):Array(g).fill(null).map((e,t)=>({type:"individual",id:`manual_player-${t}`,name:`Player ${t+1}`})),[p,g,h,b,e.supportsTeams]),[S,E]=React.useState(w);React.useEffect(()=>{E(w())},[p,g,h,b,w]),React.useEffect(()=>{e.individualOnly&&x(!1),p?y((e.maxTeams||2)*(e.playersPerTeam||2)):(f(2),v(d),e.individualOnly?y(e.maxPlayers||1):y(2))},[e.individualOnly,p,d,e.maxTeams,e.playersPerTeam,e.maxPlayers]);let T=(e,t)=>{let a=[...S];a[e]&&void 0!==a[e].name&&(a[e].name=t),E(a)},G=(e,t,a)=>{let l=JSON.parse(JSON.stringify(S));l[e]&&"team"===l[e].type&&l[e].players&&void 0!==l[e].players[t]?l[e].players[t]=a:l[e]&&"team"===l[e].type&&l[e].players&&(l[e].players[t]=a),E(l)},C=(e,t)=>{let a=JSON.parse(JSON.stringify(S));a[e]&&"team"===a[e].type&&(a[e].name=t),E(a)},P=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},R=e.maxPlayers||8,k=e.maxTeams||4,D=e.playersPerTeam||4,O=[],$=e.individualOnly?0:2*!!e.supportsTeams;for(let e=Math.max(1,$);e<=Math.min(k,8);e++)O.push((0,s.jsx)("option",{value:e,children:e},"team-c-"+e));let L=[];for(let e=1;e<=Math.min(D,4);e++)L.push((0,s.jsx)("option",{value:e,children:e},"ppt-manual-c-"+e));let F=[],A=e.individualOnly&&1===e.maxPlayers?1:R;for(let e=1;e<=A;e++)F.push((0,s.jsx)("option",{value:e,children:e},"p-c-"+e));return(0,s.jsx)("div",{className:"modal-overlay",children:(0,s.jsxs)("div",{className:"modal-content w-full max-w-3xl text-white",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h2",{className:"text-3xl sm:text-4xl font-bold game-title-font text-yellow-400",children:[e.name," Setup"]}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-500",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"mb-4 border-b border-gray-700",children:(0,s.jsxs)("nav",{className:"flex space-x-4","aria-label":"Tabs",children:[(0,s.jsx)("button",{onClick:()=>o("manual"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${"manual"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-gray-200 hover:bg-gray-700"}`,children:"Manual Entry"}),(0,s.jsx)("button",{onClick:()=>o("selectList"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${"selectList"===i?"bg-blue-600 text-white":"text-gray-400 hover:text-gray-200 hover:bg-gray-700"}`,children:"Select from List"})]})}),e&&"BEERS"===e.id&&(0,s.jsxs)("div",{className:"my-4 p-3 bg-gray-800 rounded-md",children:[(0,s.jsx)("label",{htmlFor:"beersRule",className:"block text-lg text-gray-300 mb-1",children:"Game Rule:"}),(0,s.jsxs)("select",{id:"beersRule",value:j,onChange:e=>N(e.target.value),className:"w-full sm:w-1/2 bg-gray-700 border-gray-600 text-lg p-2 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[(0,s.jsx)("option",{value:"HIGHER",children:"Must Score HIGHER"}),(0,s.jsx)("option",{value:"LOWER",children:"Must Score LOWER"})]})]}),(0,s.jsxs)("form",{onSubmit:a=>{a.preventDefault();let r=[],s=(r="manual"===i?S.map((e,t)=>{let a=e.id||n();if(p&&"team"===e.type&&e.players){let l=(e.name||`Team ${t+1}`).trim(),r=e.players.map((e,a)=>e.trim()||`T${t+1}P${a+1}`).filter(e=>e);return 0===r.length?null:{id:a,type:"team",name:l,players:r}}if(!p&&"individual"===e.type){let t=(e.name||"").trim();return t?{id:a,type:"individual",name:t}:null}return null}).filter(e=>e):l.filter(e=>m.includes(e.id)).map(e=>{let t={...e,id:e.id||n()};if("team"===e.type){let a=(e.players||[]).map(e=>String(e).trim()).filter(e=>""!==e);if(0===a.length)return null;t.players=a}return t}).filter(e=>e)).reduce((e,t)=>e+("team"===t.type?t.players?t.players.length:0:1),0),o=r.filter(e=>"team"===e.type).length;if(0===r.length)return void alert("Please add or select at least one player or team.");if(e.individualOnly&&o>0)return void alert(`Game "${e.name}" is for individual players only.`);if(!e.supportsTeams&&o>0)return void alert(`Game "${e.name}" does not support teams.`);if(p||r.some(e=>"team"===e.type)){if(o>(e.maxTeams||4))return void alert(`Maximum ${e.maxTeams||4} teams allowed. You selected ${o}.`);for(let t of r.filter(e=>"team"===e.type)){let a=t.players?t.players.length:0;if(a>(e.playersPerTeam||4))return void alert(`Team "${t.name}" has ${a} players. The limit is ${e.playersPerTeam||4} per team.`);if(0===a)return void alert(`Team "${t.name}" must have at least one player.`)}}if(s>(e.maxPlayers||8))return void alert(`Total number of players exceeds the limit of ${e.maxPlayers||8}. You have ${s}.`);if(0===s&&r.length>0)return void alert("Please ensure all selected players/teams have names.");let c={};"BEERS"===e.id&&(c.beersRule=j);let d="KILLER"===e.id&&r.length>0?r[0].id:null;t(r,c,d)},className:"space-y-6",children:["manual"===i&&(0,s.jsxs)(s.Fragment,{children:[e.supportsTeams&&!e.individualOnly&&(0,s.jsxs)("div",{className:"flex items-center space-x-4 bg-gray-800 p-3 rounded-md",children:[(0,s.jsx)("label",{className:"text-lg sm:text-xl text-gray-300",children:"Play Mode:"}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!1),className:`px-4 py-2 rounded-md text-md sm:text-lg ${!p?"bg-blue-600 text-white shadow-md":"bg-gray-700 hover:bg-gray-600"}`,children:"Individual"}),(0,s.jsx)("button",{type:"button",onClick:()=>x(!0),className:`px-4 py-2 rounded-md text-md sm:text-lg ${p?"bg-blue-600 text-white shadow-md":"bg-gray-700 hover:bg-gray-600"}`,children:"Teams"})]}),p&&e.supportsTeams&&!e.individualOnly?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"numTeams",className:"text-lg text-gray-300 block mb-1",children:"Teams:"}),(0,s.jsx)("select",{id:"numTeams",value:h,onChange:e=>f(parseInt(e.target.value)),className:"w-full bg-gray-700 border-gray-600 text-lg p-2 rounded-md focus:ring-blue-500 focus:border-blue-500",children:O})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"playersPerTeam",className:"text-lg text-gray-300 block mb-1",children:"Players per Team:"}),(0,s.jsx)("select",{id:"playersPerTeam",value:b,onChange:e=>v(parseInt(e.target.value)),className:"w-full bg-gray-700 border-gray-600 text-lg p-2 rounded-md focus:ring-blue-500 focus:border-blue-500",children:L})]})]}),(0,s.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:S.map((e,t)=>"team"!==e.type?null:(0,s.jsxs)("div",{className:"p-3 bg-gray-800 rounded-md space-y-2",children:[(0,s.jsx)("input",{type:"text",value:e.name||"",onChange:e=>C(t,e.target.value),className:"w-full bg-gray-700 p-2 rounded-md placeholder-gray-500 focus:ring-blue-500 focus:border-blue-500 font-semibold",placeholder:`Team ${t+1} Name`}),e.players&&e.players.map((a,l)=>(0,s.jsx)("input",{type:"text",value:a||"",onChange:e=>G(t,l,e.target.value),className:"w-full bg-gray-700 p-2 rounded-md placeholder-gray-500 focus:ring-blue-500 focus:border-blue-500 ml-2",placeholder:`Player ${l+1} Name`},`${e.id}-p${l}`))]},e.id))})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"numPlayers",className:"text-lg text-gray-300 block mb-1",children:"Players:"}),(0,s.jsx)("select",{id:"numPlayers",value:g,onChange:e=>y(parseInt(e.target.value)),className:"w-full sm:w-1/2 bg-gray-700 border-gray-600 text-lg p-2 rounded-md focus:ring-blue-500 focus:border-blue-500",disabled:e.individualOnly&&1===e.maxPlayers,children:F})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:S.map((e,t)=>"individual"!==e.type?null:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("label",{htmlFor:`p-${t}`,className:"w-28 text-sm text-gray-400",children:["Player ",t+1,":"]}),(0,s.jsx)("input",{type:"text",id:`p-${t}`,value:e.name||"",onChange:e=>T(t,e.target.value),className:"flex-grow bg-gray-700 p-2 rounded-md placeholder-gray-500 focus:ring-blue-500 focus:border-blue-500",placeholder:`Player ${t+1} Name`})]},e.id))})]})]}),"selectList"===i&&(0,s.jsxs)("div",{className:"space-y-2 max-h-72 overflow-y-auto pr-2 custom-scrollbar",children:[0===l.length&&(0,s.jsx)("p",{className:"text-gray-400 text-center py-4",children:'No saved players/teams. Add some in "Manage Players".'}),l.map(e=>(0,s.jsxs)("div",{className:`p-3 rounded-md cursor-pointer transition-colors flex items-center justify-between ${m.includes(e.id)?"bg-blue-600 text-white ring-2 ring-blue-400":"bg-gray-800 hover:bg-gray-700"}`,onClick:()=>P(e.id),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:e.name}),"team"===e.type&&e.players&&(0,s.jsxs)("span",{className:"text-sm text-gray-300 ml-2",children:["(",e.players.join(", "),")"]})]}),m.includes(e.id)&&(0,s.jsx)("span",{className:"text-xl",children:"✔️"})]},e.id))]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4 pt-4 border-t border-gray-700",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"bg-gray-600 hover:bg-gray-700 py-2 px-6 rounded-lg text-lg sm:text-xl",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 py-2 px-6 rounded-lg text-lg sm:text-xl flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 text-xl",children:"▶️"})," Start Game"]})]})]})]})})},p=({onSelectGame:e,onManagePlayers:t})=>(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 sm:p-8",children:[(0,s.jsx)("h1",{className:"text-5xl sm:text-6xl md:text-7xl font-black mb-10 sm:mb-12 game-title-font text-center text-yellow-400 tracking-wider",children:"Darts Arena"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5 sm:gap-6 w-full max-w-7xl",children:[Object.values(m).map(t=>(0,s.jsxs)("button",{onClick:()=>e(t),className:"bg-gray-800 hover:bg-blue-700 text-white rounded-xl p-5 sm:p-6 shadow-2xl transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 ring-blue-500 ring-opacity-50",style:{minHeight:"180px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(i,{emoji:t.iconEmoji,className:"mb-3 text-blue-400",size:50}),(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold mb-1 game-title-font",children:t.name})]}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 text-center mt-auto",children:t.description})]},t.id)),(0,s.jsxs)("button",{onClick:t,className:"bg-gray-800 hover:bg-teal-600 text-white rounded-xl p-5 sm:p-6 shadow-2xl transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 ring-teal-500 ring-opacity-50",style:{minHeight:"180px",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)(i,{emoji:"\uD83D\uDC65",className:"mb-3 text-teal-400",size:50}),(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold mb-1 game-title-font",children:"Manage Players"})]}),(0,s.jsx)("p",{className:"text-xs sm:text-sm text-gray-400 text-center mt-auto",children:"Add, edit, or delete saved players and teams."})]})]})]}),x={},g=document.getElementById("root");g?ReactDOM.createRoot(g).render((0,s.jsx)(()=>{let[e,t]=React.useState("gameSelection"),[a,l]=React.useState(null),[r,i]=React.useState(null),[g,y]=React.useState("Initializing..."),[h,f]=React.useState(null),[b,v]=React.useState([]),[j,N]=React.useState(null);React.useEffect(()=>{"undefined"!=typeof CricketGame&&(x.CricketGame=CricketGame),"undefined"!=typeof ThreeFriendlyFlightsGame&&(x.ThreeFriendlyFlightsGame=ThreeFriendlyFlightsGame),"undefined"!=typeof FiveZeroOneGame&&(x.FiveZeroOneGame=FiveZeroOneGame),"undefined"!=typeof AroundTheWorldGame&&(x.AroundTheWorldGame=AroundTheWorldGame),"undefined"!=typeof BeersGame&&(x.BeersGame=BeersGame),"undefined"!=typeof GolfGame&&(x.GolfGame=GolfGame),"undefined"!=typeof BaseballGame&&(x.BaseballGame=BaseballGame),"undefined"!=typeof KillerGame&&(x.KillerGame=KillerGame),void 0!==d&&(x.ManagePlayersScreen=d),Object.values(m).forEach(e=>{e.component&&!x[e.component]&&console.warn(`Game component ${e.component} not found in registry. Will use placeholder.`)});let r=n();console.log("Generated Session ID for socket:",r);let s=io(o,{query:{clientSessionId:r}});i(s),s.on("connect",()=>{console.log("Socket Connected! ID:",s.id),y("Connected"),s.emit("requestGameState"),s.emit("getPersistentPlayersList")}),s.on("disconnect",e=>{console.log("Socket Disconnected:",e),y("Disconnected"),"io server disconnect"===e&&s.connect()}),s.on("connect_error",e=>{console.error("Socket Connection Error:",e),y(`Error: ${e.message.substring(0,30)}...`)});let c=(a,r)=>{if(console.log(`CLIENT Received ${r}:`,a?JSON.stringify(a).substring(0,300):"null"),f(a),a&&a.mode){let e=Object.values(m).find(e=>e.id===a.mode.toUpperCase());e?(l(e),t("activeGame"),"KILLER"===a.mode&&!j&&a.participants&&a.participants.length>0&&(N(a.participants[0].id),console.log("Killer game active, clientPlayerId set to:",a.participants[0].id))):(console.warn(`Unknown game mode from server via '${r}':`,a.mode),t("gameSelection"))}else null===a&&"activeGame"===e&&G(!1)};return s.on("gameState",e=>c(e,"gameState")),s.on("gameStateUpdate",e=>c(e,"gameStateUpdate")),s.on("noGameActive",()=>{console.log("CLIENT: Received noGameActive"),("activeGame"===e||null!==h)&&(l(null),f(null),t("gameSelection"),N(null))}),s.on("persistentPlayersList",e=>{console.log("CLIENT RECEIVED persistentPlayersList:",e),v(e||[])}),s.on("persistentPlayersUpdateStatus",e=>{e.success?alert(e.message||"Player list updated!"):alert(`Error: ${e.message||"Failed to update."}`)}),s.on("gameStartError",e=>{console.error("Server failed to start game:",e),alert(`Error starting game: ${e}
Please try again or check server logs.`),a&&a.id!==m.KILLER.id?t("playerSetup"):a&&a.id===m.KILLER.id&&t("playerSetup")}),s.on("killerError",e=>{alert(`Killer Game Error: ${e}`)}),()=>{s&&s.disconnect()}},[]),React.useEffect(()=>{h&&"KILLER"===h.mode&&!j&&h.participants&&h.participants.length>0?(N(h.participants[0].id),console.log("GameState changed, clientPlayerId (re)set for Killer game to:",h.participants[0].id)):h&&"KILLER"!==h.mode&&N(null)},[h]);let w=e=>{l(e),t("playerSetup"),f(null),N(null)},S=()=>t("managePlayers"),E=(e,t={},l=null)=>{if(r&&a)if(a.id===m.KILLER.id)if(e&&e.length>0){let t=e[0].id;N(t),console.log(`[App] Emitting startKillerGame. Client-controlled ID: ${t}. Participants:`,e),r.emit("startKillerGame",{players:e})}else console.error("Killer game setup: No participants provided."),alert("Error: Cannot start Killer game without players.");else N(null),console.log(`[App] Emitting startGame for ${a.id}`),r.emit("startGame",a.id,{names:e,...t});else console.error("Socket not connected or game not selected for setup completion."),alert("Error: Not connected to server or no game selected. Cannot start game.")},T=()=>{l(null),t("gameSelection"),N(null)},G=(e=!0)=>{e&&r&&h&&h.mode&&r.emit("endGame"),l(null),t("gameSelection"),f(null),N(null)},C=e=>{r?r.emit("updatePersistentPlayersList",e):alert("Not connected to server to save players.")},P="bg-yellow-500";return"Connected"===g?P="bg-green-600":(g.startsWith("Disconnected")||g.startsWith("Error"))&&(P="bg-red-600"),(0,s.jsxs)("div",{id:"root-container",className:"min-h-screen w-full flex flex-col bg-gray-900",children:[(0,s.jsx)("header",{className:"p-3 bg-gray-800 shadow-md fixed top-0 left-0 right-0 z-40",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center px-2 sm:px-4",children:[(0,s.jsxs)("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400 game-title-font flex items-center",children:[(0,s.jsx)("span",{className:"mr-2 sm:mr-3 text-blue-400 cursor-pointer hover:text-blue-300 p-1 transition-colors",onClick:()=>{("activeGame"!==e||!h||h.gameOver||confirm("Leave current game?"))&&(G("activeGame"===e&&h?.mode),"gameSelection"!==e&&t("gameSelection"))},title:"Home / End Game",style:{fontSize:"24px",lineHeight:"1"},children:"\uD83C\uDFE0"}),"Darts Scorer"]}),(0,s.jsx)("div",{title:g,className:`text-xs sm:text-sm px-2 sm:px-3 py-1 rounded-full ${P} text-white truncate max-w-[100px] sm:max-w-[150px] transition-colors`,children:"Connected"===g?"Online":g.startsWith("Error")?"Error":"Offline"})]})}),(0,s.jsx)("main",{className:"flex-grow w-full",children:(()=>{switch(e){case"playerSetup":return a?(0,s.jsx)(u,{selectedGame:a,onSetupComplete:E,onCancel:T,persistentPlayers:b,socket:r}):(0,s.jsx)(p,{onSelectGame:w,onManagePlayers:S});case"activeGame":if(!a)return console.warn("ActiveGame view with no selectedGame. Resetting."),G(!1),(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:"No game selected. Returning to menu..."});if(h&&h.mode===a.id){let e=x[a.component];if(!e)return console.warn(`Game component ${a.component} not found in registry. Using placeholder.`),(0,s.jsx)(c,{gameMode:a,onGameEnd:()=>G(!0),gameState:h});try{return(0,s.jsx)(e,{gameMode:a,onGameEnd:G,socket:r,gameState:h,clientPlayerId:j})}catch(e){return console.error("Error rendering SpecificGameView:",e,"GameState:",h,"SelectedGame:",a),(0,s.jsx)("div",{className:"p-8 text-center text-red-500",children:"Error rendering game. Check console."})}}{let e=`Waiting for server to start ${a.name}...`;return h&&h.mode&&h.mode!==a.id?e=`Syncing... Current server mode: ${h.mode}, expected: ${a.id}`:h||(e=`Waiting for ${a.name} game data...`),(0,s.jsx)("div",{className:"text-yellow-400 p-8 text-center animate-pulse",children:e})}case"managePlayers":return(0,s.jsx)(d,{persistentPlayers:b,onSaveChanges:C,onBack:()=>t("gameSelection"),socket:r});default:return(0,s.jsx)(p,{onSelectGame:w,onManagePlayers:S})}})()}),(0,s.jsxs)("footer",{className:"p-3 sm:p-4 bg-gray-800 text-center text-gray-400 text-xs sm:text-sm border-t border-gray-700 fixed bottom-0 left-0 right-0 z-30",children:["© ",new Date().getFullYear()," Darts Scoring App. Client ID (Session/Game): ",j||"N/A"]})]})},{})):(console.error("Root element #root not found in HTML. App cannot be mounted."),document.body.innerHTML='<div style="color: red; text-align: center; margin-top: 50px; font-size: 24px;">Critical Error: App Root (#root) Missing.</div>');
//# sourceMappingURL=DartDisplayV2.f2d10a28.js.map
