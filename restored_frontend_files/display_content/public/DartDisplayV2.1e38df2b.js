let KillerGame=({gameMode:e,onGameEnd:t,socket:l,gameState:a,clientPlayerId:r,displayRole:n})=>{let[s,i]=React.useState(null),[c,m]=React.useState("NUMBER_SELECTION");if(!a||"object"!=typeof a||"KILLER"!==a.mode||!Array.isArray(a.participants)||!Array.isArray(a.KILLER_NUMBERS_TO_CHOOSE_FROM)||"number"!=typeof a.KILLER_LIVES_START)return console.warn("KillerGame: Received incomplete or invalid gameState:",a?JSON.stringify(a).substring(0,300):"null"),React.createElement("div",{className:"p-8 text-center text-yellow-400 animate-pulse font-sans"},"Loading Killer Game...");if("controller"!==n&&a.gameOver&&a.winner)if("undefined"!=typeof GameOverScreen)return React.createElement(GameOverScreen,{winner:a.winner,onDismiss:()=>t(!1)});else return React.createElement("div",{className:"p-8 text-center text-green-400 text-4xl font-sans"},`Game Over! Winner: ${a.winner?.name||"Unknown"}`);let{participants:o=[],history:d,KILLER_NUMBERS_TO_CHOOSE_FROM:x=[],KILLER_LIVES_START:E=3}=a,u=o.every(e=>null!==e.killer_number),f=o.filter(e=>e.killer_is_killer&&!e.killer_is_eliminated),g=s?o.find(e=>e.id===s):null,b=d&&Array.isArray(d)&&d.length>1,N=e=>e?.name||"UNKNOWN TARGET";React.useEffect(()=>{u&&"NUMBER_SELECTION"===c&&!a.gameOver&&(m("ACTION_MENU"),i(null)),u||"NUMBER_SELECTION"===c||a.gameOver||m("NUMBER_SELECTION")},[u,c,a.gameOver]);let R=e=>{l&&g&&!g.killer_is_eliminated&&!g.killer_number?(l.emit("killerChooseNumber",{playerId:g.id,chosenNumber:e}),i(null)):console.warn("Controller: Cannot choose number. Conditions not met for acting player.",{actingPlayerDetails:g})},p=e=>{let t=o.find(t=>t.id===e);l&&t&&u&&t.killer_number&&!t.killer_is_killer&&!t.killer_is_eliminated?l.emit("killerBecomeKiller",{playerId:t.id}):console.warn("Controller: Cannot make player a killer. Conditions not met.",{playerDetails:t,allNumbersChosen:u})},y="CONTROLLER_DEVICE_ACTION",k=e=>{if(l){let t=o.find(t=>t.id===e);t&&!t.killer_is_eliminated&&f.length>0?(console.log(`Controller: Emitting killerRemoveLife for target ${e} from ${y} (Killer Phase Mode)`),l.emit("killerRemoveLife",{fromPlayerId:y,targetPlayerId:e})):console.warn("Controller (Manage Lives): Target invalid, or no active killers.",{targetPlayerId:e,targetDetails:t,activeKillersCount:f.length})}else console.warn("Controller (Manage Lives): Socket not available.")},v=()=>{l&&b&&(l.emit("undoLastAction"),"ACTION_MENU"!==c||0!==f.length||u||m("NUMBER_SELECTION"))},_="\uD83D\uDD2A",h="\uD83C\uDFAF",w="\uD83D\uDC80";return"controller"===n?(()=>{let e="w-full text-xl font-bold rounded-lg shadow-md my-2 transition-transform hover:scale-105 active:scale-95 flex items-center justify-center text-center leading-tight disabled:opacity-50 disabled:cursor-not-allowed",l=`${e} py-5 bg-sky-600 hover:bg-sky-500 text-white`,r=`${e} py-5 bg-green-600 hover:bg-green-500 text-white`,n=`${e} py-4 text-lg bg-red-600 hover:bg-red-500 text-white`,d=`${e} py-3 text-lg bg-blue-600 hover:bg-blue-500 text-white`,u=`${e} py-4 text-lg bg-yellow-500 hover:bg-yellow-600 text-black`,y="text-2xl md:text-3xl game-title-font text-yellow-300 font-semibold text-center mb-2 leading-tight",$="text-base md:text-lg text-center text-slate-300 mb-3";if(a.gameOver)return React.createElement("div",{className:"flex flex-col items-center justify-center h-full p-3 text-center bg-slate-800 text-slate-100 font-sans rounded-lg"},React.createElement("h3",{className:`${y} text-red-400`},"GAME OVER"),a.winner&&React.createElement("p",{className:`${$} text-xl mt-1`},`Winner: ${N(a.winner)}`),React.createElement("button",{onClick:()=>t(!1),className:`${e} py-4 bg-slate-500 hover:bg-slate-600 mt-4`},"Close Controller"));if("NUMBER_SELECTION"===c)if(!g)return React.createElement("div",{className:"flex flex-col h-full p-3 space-y-2 bg-slate-800 text-slate-100 font-sans rounded-lg"},React.createElement("h3",{className:y},"Choose Player's Mark"),React.createElement("p",{className:$},"Select a player to choose their number."),React.createElement("div",{className:"w-full max-w-sm mx-auto flex-grow overflow-y-auto custom-scrollbar pr-1"},o.map(e=>e.killer_number?React.createElement("div",{key:e.id,className:`${l} opacity-70 flex justify-between items-center`},React.createElement("span",null,N(e)),React.createElement("span",{className:"text-2xl font-black ml-2"},e.killer_number)):React.createElement("button",{key:e.id,onClick:()=>i(e.id),className:l,disabled:e.killer_is_eliminated},N(e),e.killer_is_eliminated?" (Eliminated)":""))),b&&React.createElement("button",{onClick:v,className:`${u} mt-auto`},"↩️ Undo"));else return React.createElement("div",{className:"flex flex-col h-full p-2 bg-slate-800 text-slate-100 font-sans rounded-lg"},React.createElement("h3",{className:y},`Set Mark for ${N(g)}`),React.createElement("div",{className:"grid grid-cols-5 gap-2 my-auto w-full max-w-xs mx-auto"},x.map(e=>{let t=o.some(t=>t.id!==s&&t.killer_number===e);return React.createElement("button",{key:e,onClick:()=>R(e),disabled:t,className:`aspect-square text-3xl rounded-lg font-bold transition-all p-2 shadow-lg hover:scale-105 active:scale-95 flex items-center justify-center ${t?"bg-slate-700 text-slate-500 cursor-not-allowed opacity-60":"bg-sky-600 hover:bg-sky-500 text-white"}`},e)})),React.createElement("button",{onClick:()=>i(null),className:`${d} mt-2`},"← Back to Player List"));return"ACTION_MENU"===c?React.createElement("div",{className:"flex flex-col items-center justify-center h-full p-3 space-y-3 bg-slate-800 text-slate-100 font-sans rounded-lg"},React.createElement("h3",{className:y},"Killer Actions"),React.createElement("div",{className:"w-full max-w-sm space-y-3"},React.createElement("button",{onClick:()=>m("BECOME_KILLER_SELECTION"),className:r},_+" Designate Killers"),React.createElement("button",{onClick:()=>m("MANAGE_LIVES"),className:r,disabled:0===f.length},h+" Manage Lives",0===f.length?" (No Killers Yet)":""),b&&React.createElement("button",{onClick:v,className:u},"↩️ Undo Last Action"))):"BECOME_KILLER_SELECTION"===c?React.createElement("div",{className:"flex flex-col h-full p-2 bg-slate-800 text-slate-100 font-sans overflow-y-auto custom-scrollbar rounded-lg"},React.createElement("h3",{className:y},"Designate Killers"),React.createElement("div",{className:"space-y-2 flex-grow mb-2 w-full max-w-md mx-auto"},o.map(e=>{let t=e.killer_number&&!e.killer_is_killer&&!e.killer_is_eliminated;return React.createElement("div",{key:e.id,className:`p-3 rounded-lg shadow flex justify-between items-center ${e.killer_is_killer?"bg-red-800/60":"bg-slate-700"}`},React.createElement("span",{className:`text-lg ${e.killer_is_killer?"text-red-200 font-bold":"text-slate-100"}`},N(e),e.killer_is_killer?` ${_} IS KILLER`:e.killer_is_eliminated?" (Eliminated)":` (#${e.killer_number||"?"})`),t&&React.createElement("button",{onClick:()=>p(e.id),className:`${n} text-sm py-2 px-4 ml-2`},"Make Killer"))})),React.createElement("button",{onClick:()=>m("ACTION_MENU"),className:`${d} mt-auto w-full max-w-xs mx-auto`},"← Back to Actions")):"MANAGE_LIVES"===c?0!==f.length||a.gameOver?React.createElement("div",{className:"flex flex-col h-full p-2 bg-slate-800 text-slate-100 font-sans overflow-y-auto custom-scrollbar rounded-lg"},React.createElement("h3",{className:y},"Manage Player Lives"),React.createElement("p",{className:$},"Tap a life (\uD83C\uDFAF) to remove it. Killers can attack anyone."),React.createElement("div",{className:"space-y-2 flex-grow mb-2 w-full max-w-md mx-auto"},o.map(e=>{let t=e.killer_is_eliminated,l=e.killer_is_killer&&!t,a="number"==typeof e.killer_lives?e.killer_lives:E;return React.createElement("div",{key:e.id,className:`p-3 rounded-lg shadow ${t?"bg-slate-700 opacity-60":l?"bg-red-900/50 border border-red-700":"bg-slate-700 border border-slate-600"}`},React.createElement("p",{className:`text-xl font-semibold mb-1.5 ${t?"text-slate-400 line-through":l?"text-red-300":"text-sky-300"}`},N(e)+(l?` ${_}`:"")+(t?" (\uD83D\uDC80 ELIMINATED)":` (#${e.killer_number})`)),!t&&React.createElement("div",{className:"flex justify-center items-center space-x-2 sm:space-x-3 mt-2"},[...Array(E)].map((r,n)=>{let s=n<a,i=s&&!t&&f.length>0;return React.createElement("button",{key:`life-ctrl-${e.id}-${n}`,onClick:()=>{i&&k(e.id)},disabled:!i,className:`text-5xl sm:text-6xl p-1.5 rounded transition-transform duration-100 ${i?"hover:scale-110 active:scale-95 cursor-pointer":"cursor-not-allowed"} ${s?l?"text-red-300 hover:text-red-200":"text-green-400 hover:text-green-300":"text-slate-600 opacity-70"}`},s?h:w)})))})),React.createElement("button",{onClick:()=>m("ACTION_MENU"),className:`${d} mt-auto w-full max-w-xs mx-auto`},"← Back to Actions")):(m("ACTION_MENU"),React.createElement("div",{className:"p-4 text-center bg-slate-800 text-slate-100 font-sans rounded-lg"},"No active killers. Returning to menu...")):React.createElement("div",{className:"p-4 text-center bg-slate-800 text-slate-100 h-full flex flex-col justify-center items-center rounded-lg"},React.createElement("p",{className:"text-xl"},"Loading Controller Interface..."),React.createElement("button",{onClick:()=>{m("NUMBER_SELECTION"),i(null)},className:`${d} mt-4 w-auto px-6`},"Reset View"))})():(()=>{let t="OBSERVE THE SHADOWS...";if(u){if(0===f.length)t="ALL MARKS CLAIMED. AWAIT THE KILLER PROTOCOL.";else if(f.length>0){let e=f.map(e=>N(e)).join(" & ");t=React.createElement("span",{className:"text-red-400 font-bold"},`${e.toUpperCase()} ${f.length>1?"ARE":"IS"} THE KILLER.`)}}else t="ALL PLAYERS MUST SELECT THEIR MARK!";a.gameOver&&a.winner&&(t=React.createElement("span",{className:"text-green-400 font-bold"},`GAME OVER! WINNER: ${N(a.winner)}`));let l=o.length<=4,r=`${l?"px-4":"px-3"} ${l?"py-10":"py-8"}`,n=l?"text-7xl":"text-5xl",s=l?"text-6xl":"text-4xl",i=l?"text-[10rem]":"text-[7rem]",c=l?"text-[12rem]":"text-[9rem]",m=l?"text-8xl":"text-6xl",d=l?"mb-6":"mb-4",x=l?"mt-6":"mt-4",g=l?"space-x-4":"space-x-3",b=l?"min-h-[28rem]":"min-h-[22rem]";return React.createElement("div",{className:"killer-game-area container mx-auto px-1 sm:px-2 py-4 text-white flex flex-col items-center h-screen bg-slate-900 font-sans"},React.createElement("h2",{className:"text-6xl md:text-7xl font-black game-title-font text-red-500 text-center mb-4 sm:mb-6"},"undefined"!=typeof GAME_MODES&&GAME_MODES.KILLER?GAME_MODES.KILLER.name:e?.name||"Killer"),React.createElement("p",{className:"text-2xl md:text-3xl text-gray-300 mb-6 md:mb-8 text-center min-h-[3.5rem]"},t),React.createElement("div",{className:"w-full max-w-full space-y-5 md:space-y-6 flex-grow overflow-y-auto custom-scrollbar pb-4"},o.map(e=>{let t=e.killer_is_killer&&!e.killer_is_eliminated,a=e.killer_is_eliminated,o=`killer-player-card ${r} ${b} rounded-xl transition-all duration-300 ease-in-out relative overflow-hidden shadow-lg flex flex-col justify-around`,u="TARGET",f="text-sky-400";a?(u="ELIMINATED",f="text-slate-500"):t&&(u="KILLER",f="text-red-400");let R=a?`absolute inset-0 flex items-center justify-center text-red-600 ${l?"text-8xl sm:text-9xl":"text-7xl sm:text-8xl"} font-black tracking-wider opacity-70 transform -rotate-12 pointer-events-none z-10`:"hidden";return React.createElement("div",{key:e.id,className:`${o} ${t?"bg-gradient-to-br from-red-700 via-red-800 to-red-900 ring-4 ring-offset-2 ring-offset-red-800 ring-red-500 shadow-xl shadow-red-600/50":"bg-slate-800 border-2 border-slate-700 hover:border-slate-600"} ${a?"opacity-40 filter grayscale":""}`},React.createElement("div",{className:R,style:{textShadow:"2px 2px 4px rgba(0,0,0,0.5)"}},"ELIMINATED"),React.createElement("div",{className:`relative z-0 flex flex-col ${a?"pointer-events-none":""}`},React.createElement("div",{className:`flex items-baseline justify-start w-full ${d}`},React.createElement("h3",{className:`font-bold ${t?"text-red-100":a?"text-slate-500":"text-slate-100"} ${n} mr-8 leading-none`},N(e)),!a&&React.createElement("p",{className:`${f} ${s} leading-none`},t?React.createElement("span",{className:"mr-1"},_):null,u)),React.createElement("div",{className:`flex items-center w-full ${x}`},React.createElement("div",{className:"w-3/5 flex justify-center items-center"},React.createElement("div",{className:`flex items-center ${g}`},[...Array(E)].map((l,a)=>{let r=a<E-(e.killer_lives||0);return React.createElement("span",{key:`life-${e.id}-${a}`,className:`${i} ${r?"text-slate-600 opacity-70":t?"text-red-300 animate-pulse":"text-green-400"}`},r?w:h)}))),!a&&React.createElement("div",{className:"w-2/5 flex justify-center items-center"},React.createElement("p",{className:`font-black leading-none ${t?"text-red-200":a?"text-slate-600":"text-sky-300"} ${c}`},e.killer_number||React.createElement("span",{className:`text-slate-500 ${m}`},"?"))))))})))})()};
//# sourceMappingURL=DartDisplayV2.1e38df2b.js.map
